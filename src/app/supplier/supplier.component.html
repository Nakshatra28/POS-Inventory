<!-- Header -->
<!-- Header -->
<div class="flex justify-between items-center px-4">

  <div>
    <p class="text-3xl mb-1">Suppliers</p>
    <p class="text-xs text-gray-500 px-1">
      Manage your supplier relationships and procurement
    </p>
  </div>

  <button (click)="openPopup()"
    class="flex items-center gap-1 bg-blue-500 py-1.5 px-2 rounded-lg text-sm transform active:scale-95">

    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
      class="size-5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
    </svg>

    <p>Add Supplier</p>
  </button>

</div>





<!-- Search + Filter Row -->
<div class="flex gap-4 px-4 mt-10 mb-8   ">
  <!-- Search -->
  <div class="flex gap-4">
    <div class="flex items-center border border-white/20 w-64 py-0.5 rounded-lg px-2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-5">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
      </svg>
      <input type="search" [(ngModel)]="searchText" (input)="searchSubject.next(searchText)" placeholder="Search"
        class="px-2 bg-transparent outline-none">
    </div>
    <button class="flex items-center gap-1 bg-gray-700 rounded-lg px-3 py-0.5 w-24  transform  active:scale-95"
      (click)="searchCustomers()">Search</button>
  </div>

  <!-- Filter -->
  <div class="relative inline-block">
    <button (click)="toggleFilter($event)" class="flex w-24 items-center gap-1 bg-gray-700 rounded-lg px-3 py-0.5">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-4">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
      </svg>
      <p>Filter</p>
    </button>




    <!-- dropdown -->
    <div class="z-50  absolute right-0 mt-2 w-24 text-xs bg-[#0F172B] border border-white/10 rounded-lg shadow-lg"
      *ngIf="showFilter" appClickOutside (outsideClick)="showFilter = false">

      <button class="block w-full text-left px-3 py-2 hover:bg-white/5" (click)="applyStatusFilter('')">
        All
      </button>
      <button class="block w-full text-left px-3 py-2 hover:bg-white/5" (click)="applyStatusFilter('active')">
        Active
      </button>
      <button class="block w-full text-left px-3 py-2 hover:bg-white/5" (click)="applyStatusFilter('inactive')">
        Inactive
      </button>
    </div>
  </div>
</div>
<!-- ....... -->

<div>
  <div class="px-4 mt-10">
    <div
   *ngIf="selectedSupplier.length > 1"
  class=""><button class="cursor-pointer transform active:scale-95 flex  items-center gap-1 mb-2" (click)="deleteSupplier()"> <p class="text-red-600"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
</svg>
</p><p class="text-red-600  ">Delete all</p></button></div>
    <div class="overflow-x-auto rounded-lg border border-white/10">
      <table class="w-full text-left text-sm">

        <!-- Table Head -->
        <thead class="bg-gray-800 text-gray-300">
          <tr>
            <th class="py-3 px-4">
              <input type="checkbox" [checked]="selectAll" (change)="toggleSelectAll($event)"
                class="accent-blue-500 cursor-pointer" />
            </th>

            <th class="py-3 px-4">Sr No</th>
            <th class="py-3 px-4">Name</th>
            <th class="py-3 px-4">Email</th>
            <th class="py-3 px-4">Phone</th>
            <th class="py-3 px-4">Status</th>
            <th class="py-3 px-4 text-right">Actions</th>
          </tr>
        </thead>

        <!-- Table Body -->
        <tbody class="text-gray-200 bg-[#0F172B]">

          <tr *ngFor="let supplier of filteredSuppliers; let i= index"
            class="border-t border-white/10 hover:bg-white/5 transition">
            <td class="py-3 px-4">
              <input type="checkbox" [checked]="selectedSupplier.includes(supplier._id)"
                (change)="toggleSupplier(supplier._id, $event)" class="accent-blue-500 cursor-pointer" />
            </td>
            <td class="py-3 px-4">{{i +1}}</td>
            <td class="py-3 px-4">{{ supplier.name}}</td>
            <td class="py-3 px-4">{{ supplier.email}}</td>
            <td class="py-3 px-4">{{ supplier.phone}}</td>
            <td class="py-3 px-4">
              <span class="px-2 py-1 text-xs rounded" [ngClass]="{
      'bg-green-600/20 text-green-400': (supplier.status || 'active') === 'active',
      'bg-red-600/20 text-red-400': supplier.status === 'inactive'
    }">
                {{ (supplier.status || 'active') | titlecase }}
              </span>
            </td>
            <td class="py-3 px-4 text-right">
              <button 
              (click)="openEdit(supplier)"
              class="text-blue-400 hover:underline text-sm">Edit</button>

              
   <button  class="text-red-600 hover:underline text-sm ml-3"  (click)="deleteSupplier()" ><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
</svg>
</button>
            </td>
          </tr>









        </tbody>

      </table>
    </div>
  </div>


</div>

<div
  *ngIf="show"
  class="fixed top-5 right-5 z-[9999]
         px-4 py-2 rounded-lg shadow-lg
         text-sm font-medium
         transition-all duration-300"
  [ngClass]="{
    'bg-green-600 text-white': type === 'success',
    'bg-red-600 text-white': type === 'error'
  }"
>
  {{ message }}
</div>



<app-supplierpopup *ngIf="openSupplierPopup" (close)="closePopup()"
  (supplierAdded)="getAllSupplier()"></app-supplierpopup>

<app-supplieredit
*ngIf="openSupplierEdit"
(close)="closeEdit()"
  [data]="supplierToEdit"
  (supplierUpdated)="getAllSupplier()"
  
   (supplierUpdated)="onSupplierUpdated()"
  (supplierUpdateError)="onSupplierUpdateError($event)">

>
</app-supplieredit>

<!-- TOAST -->
<div *ngIf="toastVisible"
     class="fixed top-6 right-6 z-[9999]
            px-5 py-3 rounded-xl shadow-2xl
            flex items-center gap-3 animate-slide-in"
     [ngClass]="{
       'bg-[#0C1424] border border-green-500/30 text-green-400': toastType === 'success',
       'bg-[#0C1424] border border-red-500/30 text-red-400': toastType === 'error'
     }">

  <!-- Icon -->
  <svg *ngIf="toastType === 'success'"
       xmlns="http://www.w3.org/2000/svg"
       fill="none" viewBox="0 0 24 24"
       stroke-width="1.5" stroke="currentColor"
       class="size-6">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M9 12.75 11.25 15 15 9.75" />
  </svg>

  <svg *ngIf="toastType === 'error'"
       xmlns="http://www.w3.org/2000/svg"
       fill="none" viewBox="0 0 24 24"
       stroke-width="1.5" stroke="currentColor"
       class="size-6">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 9v3.75m0 3h.008M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>

  <span class="text-sm font-medium">
    {{ toastMessage }}
  </span>
</div>
