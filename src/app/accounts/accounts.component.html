<!-- Header -->
<div class="flex justify-between items-center px-4">
  <div>
    <p class="text-3xl">Accounts & Journal</p>
    <p class="text-xs text-gray-500 px-1">
      Manage chart of accounts and journal entries
    </p>
  </div>

</div>



<!-- TOP CARDS -->
<div class="flex justify-even gap-8 mt-4 px-4 mt-4    ">

  <!-- Card -->
  <div class="bg-[#071426] border border-white/10 h-28 rounded-xl w-40 p-3  shadow-md">
    <div class="flex justify-between items-center">
      <p class="text-sm text-gray-300">Total Sales</p>
      <div class="bg-green-500 flex justify-center items-center size-8 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="size-5 text-white">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </div>
    </div>
   <p class="text-xl font-semibold">
  ₹{{ accountSummary.totalSales | number }}
</p>
    
  </div>

  <!-- Card -->
  <div class="bg-[#071426] border border-white/10 h-28 rounded-xl w-40 p-3 shadow-md">
    <div class="flex justify-between items-center">
      <p class="text-sm text-gray-300">Stock Value</p>
      <div class="bg-blue-500 flex justify-center items-center size-8 rounded-lg">
        <i class="fa-solid fa-cubes text-white"></i>
      </div>
    </div>
    <p class="text-xl font-semibold">
  ₹{{ accountSummary.stockValue | number }}
</p>
    
  </div>

  <!-- Card -->
  <div class="bg-[#071426] border border-white/10 h-28 rounded-xl w-40 p-3 shadow-md">
    <div class="flex justify-between items-center">
      <p class="text-sm text-gray-300">Outstanding Payment</p>
      <div class="bg-orange-500 flex justify-center items-center size-8 rounded-lg">
        <i class="fa-solid fa-exclamation text-white"></i>
      </div>
    </div>
<p class="text-xl font-semibold">
  ₹{{ accountSummary.outstandingAmount | number }}
</p>
   
  </div>

  <!-- Card -->
  <div class="bg-[#071426] border border-white/10 h-28 rounded-xl w-40 p-3 shadow-md">
    <div class="flex justify-between items-center">
      <p class="text-sm text-gray-300">Active Customers</p>
      <div class="bg-green-600 flex justify-center items-center size-8 rounded-lg">
        <i class="fa-solid fa-user-group text-white"></i>
      </div>
    </div>
   <p class="text-xl font-semibold">
  {{ accountSummary.activeCustomers }}
</p>
  
  </div>


   <!-- Card -->
    <div class="bg-[#071426] border border-white/10 h-28 rounded-xl w-40 p-3 shadow-md">
      <div class="flex justify-between items-center">
        <p class="text-sm text-gray-300">Paid Amount</p>
        <div class="bg-green-600 flex justify-center items-center size-8 rounded-lg">
          <i class="fa-solid fa-user-group text-white"></i>
        </div>
      </div>
    <p class="text-xl font-semibold">
      ₹{{ accountSummary.totalPaid | number }}
  </p>
     
    </div>

</div>



<!-- Search + Filter Row -->
<div class="flex gap-4 px-6 mt-10 mb-8   ">
  <!-- Search -->
  <div>
    <div class="flex items-center border border-white/20 w-64 py-0.5 rounded-lg px-2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-5">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
      </svg>
      <input type="search" [(ngModel)]="searchText" (input)="searchAccounts()" placeholder="Search"
        class="px-2 bg-transparent outline-none">
    </div>
  </div>

  <!-- Filter -->
  <div>
    <button class="flex items-center gap-1 bg-gray-700 rounded-lg px-3 py-0.5">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-4">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
      </svg>
      <p>Filter</p>
    </button>
  </div>
</div>




<div>
  <div class="px-4 mt-10">
    <div class="overflow-x-auto rounded-lg border border-white/10">
      <table class="w-full text-left text-sm">

        <!-- Table Head -->
        <thead class="bg-gray-800 text-gray-300">
          <tr>

            <th class="py-3 px-4">Code</th>
            <th class="py-3 px-4"> Account Name</th>
            <th class="py-3 px-4">Balance</th>
            <th class="py-3 px-4">Category</th>
            <th class="py-3 px-4">Type</th>
            <th class="py-3 px-4 text-right">Actions</th>
          </tr>
        </thead>

        <!-- Table Body -->
     <tbody class="text-gray-200 bg-[#0F172B] backdrop-blur-xl">

  <!-- 1️⃣ Loading -->
  <tr *ngIf="isLoadingAccounts">
    <td colspan="6" class="py-6 text-center text-gray-400">
      Loading accounts...
    </td>
  </tr>

  <!-- 2️⃣ No Data -->
  <tr *ngIf="!isLoadingAccounts && filteredAccounts.length === 0">
    <td colspan="6" class="py-6 text-center text-gray-400">
      No accounts found
    </td>
  </tr>

  <!--Data Rows -->
  <ng-container *ngIf="!isLoadingAccounts && filteredAccounts.length > 0">
    <tr
      *ngFor="let acc of filteredAccounts"
      class="border-t border-white/10 hover:bg-white/5 transition"
    >
      <td class="py-3 px-4">{{ acc.code }}</td>
      <td class="py-3 px-4">{{ acc.name }}</td>
      <td class="py-3 px-4 font-medium">
        ₹{{ acc.balance | number }}
      </td>
      <td class="py-3 px-4">{{ acc.category }}</td>
      <td class="py-3 px-4">
        <span
          class="px-2 py-1 text-xs rounded"
          [ngClass]="{
            'bg-green-600/20 text-green-400': acc.type === 'Debit',
            'bg-blue-600/20 text-blue-400': acc.type === 'Credit'
          }"
        >
          {{ acc.type }}
        </span>
      </td>
   <td class="py-3 px-4 text-right">
  <button
    class="text-blue-400 hover:underline text-sm"
    (click)="viewLedger(acc)">
    View
  </button>
</td>
    </tr>
  </ng-container>

</tbody>



      </table>
    </div>
  </div>


</div>

<app-ledger
 *ngIf="showLedgerPopup"
  [account]="selectedAccount"
  [ledgerList]="ledgerList"
  [isLoading]="isLedgerLoading"
  (close)="showLedgerPopup = false"
></app-ledger>